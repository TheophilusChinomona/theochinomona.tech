# Spec Requirements: Client Project Tracking System

## Initial Description

Create phases + tasks, generate tracking code, build tracking page.

This is Phase 5 of the product roadmap (Size: L). It addresses the core differentiator of "Live client project tracking" and solves the problem of "Clients lack visibility" by providing a tracking code + dashboard + phases + tasks system.

## Requirements Discussion

### First Round Questions

**Q1:** I assume the tracking code will be a unique, short alphanumeric code (e.g., `TC-A7K3X2`) that clients can use to view their project without logging in. Is that correct, or should it require authentication?
**Answer:** Correct - unique short alphanumeric code, no authentication required.

**Q2:** I'm thinking projects have a hierarchy: Project → Phases → Tasks. Should phases have estimated/actual dates, and tasks have completion percentages or just done/not-done status?
**Answer:** Yes to estimated/actual dates for phases, and completion percentages for tasks.

**Q3:** I assume the public tracking page (accessed via tracking code) shows a read-only timeline/progress view. Should it also display task-level details, comments/notes from the developer, and file attachments/deliverables?
**Answer:** Yes to all of the above - task-level details, comments/notes, and file attachments/deliverables.

**Q4:** For tracking code generation, should codes be auto-generated when a project is created, manually generated by admin on demand, or regeneratable/revocable?
**Answer:** Auto-generated when project is created, but should be regeneratable for security.

**Q5:** I assume the admin interface for managing phases/tasks will be part of the existing Admin Dashboard. Should there be drag-and-drop reordering of phases/tasks, or is a simple list with up/down arrows sufficient?
**Answer:** Drag and drop reordering.

**Q6:** Should the tracking page have any notification features (email updates when phases complete)?
**Answer:** Yes, this is in scope for this phase.

**Q7:** Is there anything that should explicitly be excluded from this phase?
**Answer:** Blog post management, "save password" (remember me) feature, and login modal branding should be separate specs. This spec stays focused on project tracking.

### Existing Code to Reference

No similar existing features identified for reference.

### Follow-up Questions

**Follow-up 1:** For email notifications when phases complete - should this be automatic, admin-toggled, or client opt-in?
**Answer:** Automatic by default, but admin can toggle notifications on/off per project, and clients can opt-in/out of receiving emails.

**Follow-up 2:** For file attachments/deliverables - should files be uploadable per-task, per-phase, or both? Any file size/type restrictions?
**Answer:** Both per-task and per-phase attachments. Only images and PDFs allowed. Videos should be embedded links (not uploaded files).

## Visual Assets

### Files Provided:
No visual assets provided.

### Visual Insights:
N/A - No visuals to analyze.

## Requirements Summary

### Functional Requirements

**Project Structure:**
- Projects contain multiple Phases
- Phases contain multiple Tasks
- Phases have estimated and actual dates
- Tasks have completion percentages (0-100%)

**Tracking Code System:**
- Unique short alphanumeric codes (e.g., `TC-A7K3X2`)
- Auto-generated when project is created
- Regeneratable/revocable for security
- No authentication required to view tracking page

**Public Tracking Page:**
- Read-only timeline/progress view
- Shows phase summaries and task-level details
- Displays developer comments/notes
- Shows file attachments and deliverables
- Supports embedded video links

**Admin Interface:**
- Part of existing Admin Dashboard
- CRUD operations for phases and tasks
- Drag-and-drop reordering for phases and tasks
- File upload for attachments (images and PDFs only)
- Add developer notes/comments per task or phase

**Email Notifications:**
- Automatic notifications when phases complete
- Admin can toggle notifications on/off per project
- Clients can opt-in/out of email notifications

**File Attachments:**
- Uploadable per-task and per-phase
- Allowed file types: images (jpg, png, gif, webp) and PDFs only
- Videos handled as embedded links (YouTube, Vimeo, etc.)

### Reusability Opportunities

- Existing Admin Dashboard layout and navigation
- Existing Supabase auth and RLS patterns
- Existing shadcn/ui components
- Database tables already planned in tech-stack: `project_phases`, `project_tasks`, `tracking_codes`
- API module already planned: `tracking` – code generation & lookup

### Scope Boundaries

**In Scope:**
- Project phases CRUD with dates
- Project tasks CRUD with completion percentages
- Tracking code generation and regeneration
- Public tracking page with progress view
- Developer notes/comments on phases and tasks
- File attachments (images and PDFs) on phases and tasks
- Embedded video links
- Drag-and-drop reordering in admin
- Email notifications on phase completion
- Client email opt-in/out preferences
- Admin notification toggle per project

**Out of Scope:**
- Blog post management (separate spec)
- "Save password" / Remember me feature (separate spec)
- Login/signup modal branding (separate spec)
- Client comments/feedback on tracking page
- Payment milestones tied to phases
- Video file uploads (use embedded links instead)

### Technical Considerations

- Integration with existing Admin Dashboard
- Supabase storage for file attachments
- Row Level Security for project data
- Email service integration (Supabase Edge Functions or external service like Resend/SendGrid)
- Tracking code lookup API endpoint (public, no auth required)
- Real-time updates consideration for tracking page (optional enhancement)

